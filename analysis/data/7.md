# Developing forecasting models with alternative model approaches
Nathan Mowat, Chris Woodard, Jessica Wheeler, Bill Kerneckel  
July 7, 2016  



****************************

#### Table of Contents

[Back to Home](https://github.com/wkerneck/CaseStudy2)

* 7.0   [Developing forecasting models with alternative model approaches](#id-section6)
* 7.1   [Exponential smoothing](#id-section6)
* 7.1.1 [Simple expontential smoothing](#id-section6)
* 7.1.2 [Holt's linear trend method](#id-section6)
* 7.1.3 [Holt-Winter's seasonal method](#id-section6)
* 7.1.4 [Innovations state space models for exponential smoothing](#id-section6) 

****************************
<div id='id-section7.0'/>
#### 7.0 Developing forecasting models with alternative model approaches
 
****************************
<div id='id-section7.1'/>
#### 7.1 Exponential Smoothing

Exponential Smoothing uses past values to calculate a forecast. The strength with which each value influences the forecast is weakened with help of a smoothing parameter. Thus we are dealing with a weighted average, whose values fade out the longer ago they were in the past.

****************************
<div id='id-section7.1'/>
#### 7.1 Exponential Smoothing

****************************
<div id='id-section7.1.1'/>
####  7.1.1 Simple expontential smoothing

Formula: ses(). It must be decided if alpha (the smoothing parameter should be automatically calculated. If initial=simple, the alpha value can be set to any chosen value, if initial=optimal (or nothing, as this is the 
default), alpha will be set to the optimal value based on ets(). h=12 gives the number of cycles for the forecast.


```r
Model_ses <- ses(TotalAsIs, h=12)
summary(Model_ses)
```

```
## 
## Forecast method: Simple exponential smoothing
## 
## Model Information:
## Simple exponential smoothing 
## 
## Call:
##  ses(x = TotalAsIs, h = 12) 
## 
##   Smoothing parameters:
##     alpha = 0.671 
## 
##   Initial states:
##     l = 2173226.7433 
## 
##   sigma:  609507
## 
##      AIC     AICc      BIC 
## 2230.058 2230.232 2234.612 
## 
## Error measures:
##                    ME   RMSE      MAE       MPE     MAPE     MASE
## Training set 47469.84 609507 429997.1 -1.511008 15.02336 1.172074
##                    ACF1
## Training set 0.02384493
## 
## Forecasts:
##          Point Forecast   Lo 80   Hi 80   Lo 95   Hi 95
## Jan 2014        4466448 3685333 5247562 3271836 5661059
## Feb 2014        4466448 3525801 5407094 3027853 5905042
## Mar 2014        4466448 3389650 5543245 2819628 6113267
## Apr 2014        4466448 3268880 5664015 2634926 6297969
## May 2014        4466448 3159220 5773675 2467215 6465680
## Jun 2014        4466448 3058072 5874823 2312524 6620371
## Jul 2014        4466448 2963718 5969177 2168221 6764674
## Aug 2014        4466448 2874947 6057948 2032458 6900437
## Sep 2014        4466448 2790873 6142022 1903878 7029017
## Oct 2014        4466448 2710821 6222074 1781448 7151447
## Nov 2014        4466448 2634263 6298632 1664363 7268532
## Dec 2014        4466448 2560778 6372117 1551977 7380918
```

```r
plot(Model_ses)
```

![](7_files/figure-html/unnamed-chunk-2-1.png)<!-- -->

The Akaike's Information Criterion(AIC/AICc) or the Bayesian Information 

Criterion (BIC) should be at minimum.


```r
plot(Model_ses, plot.conf=FALSE, ylab="Exports Chulwalar  )", xlab="Year", main="", fcol="white", type="o")
lines(fitted(Model_ses), col="green", type="o")
lines(Model_ses$mean, col="blue", type="o")
legend("topleft",lty=1, col=c(1,"green"), c("data", expression(alpha == 0.671)),pch=1)
```

![](7_files/figure-html/unnamed-chunk-3-1.png)<!-- -->

****************************
<div id='id-section7.1.2'/>
####  7.1.2 Holt's linear trend method

Holt added to the model in order to forecast using trends as well. For this it is necessary to add a beta, which determines the trend. If neither alpha nor beta is stated, both parameters will be optimised using ets(). 


```r
Model_holt_1 <- holt(TotalAsIs,h=12)
summary(Model_holt_1)
```

```
## 
## Forecast method: Holt's method
## 
## Model Information:
## Holt's method 
## 
## Call:
##  holt(x = TotalAsIs, h = 12) 
## 
##   Smoothing parameters:
##     alpha = 0.6571 
##     beta  = 1e-04 
## 
##   Initial states:
##     l = 2040390.7764 
##     b = 45050.7514 
## 
##   sigma:  608119.1
## 
##      AIC     AICc      BIC 
## 2233.730 2234.327 2242.837 
## 
## Error measures:
##                    ME     RMSE      MAE      MPE     MAPE     MASE
## Training set -16586.9 608119.1 441110.7 -3.88925 15.75307 1.202367
##                    ACF1
## Training set 0.03462672
## 
## Forecasts:
##          Point Forecast   Lo 80   Hi 80   Lo 95   Hi 95
## Jan 2014        4536367 3757031 5315703 3344475 5728259
## Feb 2014        4581298 3648703 5513894 3155016 6007580
## Mar 2014        4626230 3562188 5690271 2998918 6253541
## Apr 2014        4671161 3490181 5852141 2865008 6477314
## May 2014        4716092 3428721 6003463 2747228 6684956
## Jun 2014        4761024 3375378 6146669 2641862 6880185
## Jul 2014        4805955 3328531 6283379 2546429 7065480
## Aug 2014        4850886 3287035 6414738 2459182 7242591
## Sep 2014        4895818 3250047 6541588 2378829 7412807
## Oct 2014        4940749 3216925 6664573 2304387 7577111
## Nov 2014        4985680 3187164 6784196 2235088 7736273
## Dec 2014        5030612 3160363 6900860 2170314 7890909
```

```r
plot(Model_holt_1)
```

![](7_files/figure-html/unnamed-chunk-4-1.png)<!-- -->

The trend is exponential if the intercepts(level) and the gradient (slope) are multiplied with eachother. The values are worse. As the Beta was very low in the optimisation, the forecast is very similar to the ses() model. 


```r
Model_holt_2<- holt(TotalAsIs, exponential=TRUE,h=12)
summary(Model_holt_2)
```

```
## 
## Forecast method: Holt's method with exponential trend
## 
## Model Information:
## Holt's method with exponential trend 
## 
## Call:
##  holt(x = TotalAsIs, h = 12, exponential = TRUE) 
## 
##   Smoothing parameters:
##     alpha = 0.6637 
##     beta  = 1e-04 
## 
##   Initial states:
##     l = 2041538.9468 
##     b = 1.0029 
## 
##   sigma:  0.2438
## 
##      AIC     AICc      BIC 
## 2251.010 2251.607 2260.116 
## 
## Error measures:
##                    ME     RMSE      MAE       MPE     MAPE     MASE
## Training set 37825.61 609787.5 433018.9 -1.838214 15.18487 1.180311
##                    ACF1
## Training set 0.02918287
## 
## Forecasts:
##          Point Forecast   Lo 80   Hi 80   Lo 95    Hi 95
## Jan 2014        4488281 3094294 5884746 2335536  6583919
## Feb 2014        4502175 2851690 6329346 2126305  7329490
## Mar 2014        4516113 2659882 6590960 1945271  8060803
## Apr 2014        4530094 2457490 6842555 1743627  8540193
## May 2014        4544118 2360928 6985305 1610277  9171675
## Jun 2014        4558186 2173759 7248468 1493202  9233293
## Jul 2014        4572297 2110630 7399482 1426939  9611758
## Aug 2014        4586452 2028932 7612920 1340552 10363469
## Sep 2014        4600650 1935698 7918862 1283976 11074367
## Oct 2014        4614893 1867118 8144809 1179117 11242779
## Nov 2014        4629180 1804270 8158993 1119334 11903362
## Dec 2014        4643510 1710944 8428039 1048804 12022613
```

```r
plot(Model_holt_2)
```

![](7_files/figure-html/unnamed-chunk-5-1.png)<!-- -->

As such simple trends tend to forecast the future to positively, we have added a dampener.

Similar values to that of Model_holt_1 


```r
Model_holt_3 <- holt(TotalAsIs, damped=TRUE,h=12)
summary(Model_holt_3)
```

```
## 
## Forecast method: Damped Holt's method
## 
## Model Information:
## Damped Holt's method 
## 
## Call:
##  holt(x = TotalAsIs, h = 12, damped = TRUE) 
## 
##   Smoothing parameters:
##     alpha = 0.6613 
##     beta  = 2e-04 
##     phi   = 0.98 
## 
##   Initial states:
##     l = 2040392.5761 
##     b = 45053.25 
## 
##   sigma:  608787.2
## 
##      AIC     AICc      BIC 
## 2235.888 2236.797 2247.272 
## 
## Error measures:
##                    ME     RMSE      MAE       MPE     MAPE     MASE
## Training set 15578.94 608787.2 436909.7 -2.797612 15.46526 1.190916
##                    ACF1
## Training set 0.03351419
## 
## Forecasts:
##          Point Forecast   Lo 80   Hi 80   Lo 95   Hi 95
## Jan 2014        4483618 3703426 5263811 3290417 5676819
## Feb 2014        4493914 3558436 5429391 3063224 5924603
## Mar 2014        4504003 3435520 5572486 2869899 6138107
## Apr 2014        4513891 3327168 5700614 2698955 6328827
## May 2014        4523581 3229332 5817829 2544198 6502963
## Jun 2014        4533077 3139534 5926619 2401837 6664316
## Jul 2014        4542383 3056128 6028638 2269352 6815413
## Aug 2014        4551503 2977955 6125051 2144969 6958036
## Sep 2014        4560440 2904162 6216719 2027381 7093499
## Oct 2014        4569199 2834101 6304298 1915595 7222803
## Nov 2014        4577783 2767264 6388301 1808834 7346732
## Dec 2014        4586195 2703249 6469141 1706477 7465913
```

```r
plot(Model_holt_3)
```

![](7_files/figure-html/unnamed-chunk-6-1.png)<!-- -->

This also works for exponential trends. 

The values remain worse. 


```r
Model_holt_4 <- holt(TotalAsIs, exponential=TRUE, damped=TRUE,h=12)
summary(Model_holt_4)
```

```
## 
## Forecast method: Damped Holt's method with exponential trend
## 
## Model Information:
## Damped Holt's method with exponential trend 
## 
## Call:
##  holt(x = TotalAsIs, h = 12, damped = TRUE, exponential = TRUE) 
## 
##   Smoothing parameters:
##     alpha = 0.6679 
##     beta  = 1e-04 
##     phi   = 0.9799 
## 
##   Initial states:
##     l = 2041541.9705 
##     b = 1.0019 
## 
##   sigma:  0.2449
## 
##      AIC     AICc      BIC 
## 2253.216 2254.125 2264.600 
## 
## Error measures:
##                    ME     RMSE      MAE       MPE     MAPE     MASE
## Training set 46119.56 609906.7 432069.1 -1.549114 15.11987 1.177722
##                   ACF1
## Training set 0.0254941
## 
## Forecasts:
##          Point Forecast   Lo 80   Hi 80     Lo 95    Hi 95
## Jan 2014        4470648 3088389 5869343 2316745.3  6626919
## Feb 2014        4473164 2797864 6154309 2084116.6  7387480
## Mar 2014        4475630 2646443 6442386 1894668.2  7938591
## Apr 2014        4478047 2437598 6713491 1722482.9  8479346
## May 2014        4480418 2332674 7001045 1650917.0  8926297
## Jun 2014        4482742 2249471 7150107 1475241.4  9307788
## Jul 2014        4485020 2065429 7304938 1423516.2  9535173
## Aug 2014        4487253 1964560 7423823 1303257.8 10042698
## Sep 2014        4489443 1924768 7606276 1221710.6 10751850
## Oct 2014        4491589 1806312 7963012 1147513.4 11297182
## Nov 2014        4493694 1730993 8032038 1088841.0 11239214
## Dec 2014        4495757 1643255 8132022  940711.4 11672872
```

```r
plot(Model_holt_4)
```

![](7_files/figure-html/unnamed-chunk-7-1.png)<!-- -->

level and slope can be plotted individually for each model. 


```r
plot(Model_holt_1$model$state)
```

![](7_files/figure-html/unnamed-chunk-8-1.png)<!-- -->

```r
plot(Model_holt_2$model$state)
```

![](7_files/figure-html/unnamed-chunk-8-2.png)<!-- -->

```r
plot(Model_holt_3$model$state)
```

![](7_files/figure-html/unnamed-chunk-8-3.png)<!-- -->

```r
plot(Model_holt_4$model$state)
```

![](7_files/figure-html/unnamed-chunk-8-4.png)<!-- -->

```r
plot(Model_holt_1, plot.conf=FALSE, ylab="Exports Chulwalar  )", xlab="Year", main="", fcol="white", type="o")
lines(fitted(Model_ses), col="purple", type="o")
lines(fitted(Model_holt_1), col="blue", type="o")
lines(fitted(Model_holt_2), col="red", type="o")
lines(fitted(Model_holt_3), col="green", type="o")
lines(fitted(Model_holt_4), col="orange", type="o")
lines(Model_ses$mean, col="purple", type="o")
lines(Model_holt_1$mean, col="blue", type="o")
lines(Model_holt_2$mean, col="red", type="o")
lines(Model_holt_3$mean, col="green", type="o")
lines(Model_holt_4$mean, col="orange", type="o")
legend("topleft",lty=1, col=c(1,"purple","blue","red","green","orange"), c("data", "SES","Holts auto", "Exponential", "Additive Damped", "Multiplicative Damped"),pch=1)
```

![](7_files/figure-html/unnamed-chunk-8-5.png)<!-- -->

As these forecasts are not very convincing at the moment, there is no need to export the data.
